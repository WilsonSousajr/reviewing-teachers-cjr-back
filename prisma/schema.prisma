generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}


model User {
  id           Int       @default(autoincrement()) @id
  email        String    @unique
  password     String
  name         String
  picture      String
  departament  String
  course       String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @default(now())
  reviews      Review[] 
  comments     Comment[]
}

model Review {
  id           Int       @default(autoincrement()) @id
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       Int
  teacher      Teacher   @relation(fields: [teacherId], references: [id])
  teacherId    Int
  discipline   Discipline @relation(fields: [disciplineId], references: [id])
  disciplineId Int
  title        String
  content      String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @default(now())
  comments     Comment[]
}

model Comment {
  id           Int       @default(autoincrement()) @id
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       Int
  review       Review    @relation(fields: [reviewId], references: [id], onDelete: Cascade)
  reviewId     Int
  content      String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @default(now())
}

model Teacher {
  id           Int       @default(autoincrement()) @id
  name         String
  departament  String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @default(now())
  disciplines  TeacherToDiscipline[]
  reviews      Review[]
}

model Discipline {
  id           Int       @default(autoincrement()) @id
  name         String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @default(now())
  teachers     TeacherToDiscipline[]
  reviews      Review[]
}

model TeacherToDiscipline {
  id           Int       @default(autoincrement()) @id
  teacher      Teacher   @relation(fields: [teacherId], references: [id])
  teacherId    Int
  discipline   Discipline @relation(fields: [disciplineId], references: [id])
  disciplineId Int
}
